<img src="assets/image/logo.png" alt="éšæœºå›¾ç‰‡&æ¯æ—¥ä¸€å›¾" width="200">

### 2025å¹´4æœˆ28æ—¥ï¼Œä¿®æ”¹äº†dockerçš„è·¯å¾„æ˜ å°„ï¼Œè¯·æ³¨æ„ã€‚

# éšæœºå›¾ç‰‡&æ¯æ—¥ä¸€å›¾

## Demoåœ°å€ï¼š

https://today-img.20160825.xyz

https://today-img.20160825.xyz/img/today.jpg


ä¸€ä¸ªåŸºäº Flask çš„ç½‘é¡µæœåŠ¡ï¼Œæä¾›éšæœºå›¾ç‰‡å’Œæ¯æ—¥ä¸€å›¾åŠŸèƒ½ï¼Œæ”¯æŒæœ¬åœ°æ–‡ä»¶å¤¹ï¼ˆå¦‚ NASï¼‰ä¸­çš„å›¾ç‰‡è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºã€‚

## dockeråœ°å€
`https://hub.docker.com/repository/docker/baozaolaowu/random-img-server/general`

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ–¼ï¸ ä¸¤ç§è®¿é—®æ–¹å¼ï¼š
  - ç½‘é¡µç•Œé¢ï¼ˆ`http://localhost:5000`ï¼‰ï¼šè‡ªåŠ¨åˆ·æ–°ï¼Œå¸¦è®¾ç½®æŒ‰é’®ï¼Œæµè§ˆå™¨å…¨å±å³å¯å½“ä½œç”µå­ç›¸å†Œã€‚
  - ç›´æ¥å›¾ç‰‡é“¾æ¥ï¼ˆ`http://localhost:5000/img/today.jpg`ï¼‰ï¼šè¢«åŠ¨åˆ·æ–°ï¼Œå›ºå®šåœ°å€ï¼Œå¼ºåˆ¶æ— ç¼“å­˜ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šæ˜¾ç¤ºæœ€æ–°å›¾ç‰‡ã€‚

- ğŸ”„ çµæ´»çš„åˆ·æ–°é€‰é¡¹ï¼š
  - ä½¿ç”¨ cron è¡¨è¾¾å¼è‡ªå®šä¹‰é—´éš”
  - æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®
  - æ ‡ç­¾é¡µæ¿€æ´»æ—¶è‡ªåŠ¨åˆ·æ–°

- ğŸ“± æ™ºèƒ½æ˜¾ç¤ºæ¨¡å¼ï¼š
  - æ™ºèƒ½æ¨¡å¼ï¼ˆè‡ªåŠ¨é€‚åº”å›¾ç‰‡æ–¹å‘ï¼‰
  - å®½åº¦æ’‘æ»¡æ¨¡å¼
  - é«˜åº¦æ’‘æ»¡æ¨¡å¼
  - æ‹‰ä¼¸æ’‘æ»¡æ¨¡å¼

- ğŸš€ æ€§èƒ½ä¼˜åŒ–ï¼š
  - å›¾ç‰‡ç¼“å­˜
  - å¸¦å®½æ„ŸçŸ¥æ›´æ–°
  - éæ´»åŠ¨æ ‡ç­¾é¡µèµ„æºèŠ‚çœ

- ğŸï¸ ç€‘å¸ƒæµæ¨¡å¼ï¼š
  - æµè§ˆå¤šå¼ å›¾ç‰‡çš„æœ€ä½³æ–¹å¼
  - å¤šåˆ—è‡ªé€‚åº”å¸ƒå±€ï¼Œå¯è‡ªå®šä¹‰åˆ—æ•°ï¼ˆ1-10åˆ—ï¼‰
  - æ–‡ä»¶å¤¹å¯¼èˆªä¸å±‚çº§æµè§ˆ
  - å›¾ç‰‡æ’åºåŠŸèƒ½ï¼ˆæŒ‰æ–‡ä»¶åã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€éšæœºé¡ºåºï¼‰
  - å›¾ç‰‡å…¨å±æŸ¥çœ‹ä¸ç¼©æ”¾
  - é”®ç›˜å¯¼èˆªï¼ˆæ–¹å‘é”®åˆ‡æ¢å›¾ç‰‡ï¼Œæ»šè½®ç¼©æ”¾ï¼ŒCtrl+æ»šè½®åˆ‡æ¢å›¾ç‰‡ï¼‰
  - è‡ªå®šä¹‰å¸ƒå±€è®¾ç½®ï¼ˆåˆ—é—´è·ã€å›¾ç‰‡é—´è·ã€åœ†è§’å¤§å°ï¼‰

## åº”ç”¨åœºæ™¯

- ç”µå­ç›¸æ¡†ï¼šè‡ªåŠ¨è½®æ’­æ˜¾ç¤ºæ‚¨çš„ç…§ç‰‡é›†
- åŠ¨æ€å£çº¸ï¼šé…åˆæ”¯æŒ URL å›¾ç‰‡çš„å£çº¸ç¨‹åºä½¿ç”¨
- ä¸»é¡µèƒŒæ™¯ï¼šä½œä¸ºä¸ªäººä¸»é¡µæˆ–ä»ªè¡¨ç›˜çš„èƒŒæ™¯
- å­é¢æ¿èƒŒæ™¯ï¼šé›†æˆåˆ° Homepage æˆ– Sub-panel ç­‰å·¥å…·ï¼Œå®ç°åŠ¨æ€èƒŒæ™¯

## å¿«é€Ÿå¼€å§‹

1. åˆ›å»ºé…ç½®ç›®å½•ï¼š
```bash
# åˆ›å»ºé…ç½®å’Œå›¾ç‰‡ç›®å½•
mkdir -p /path/to/config /path/to/photos /path/to/thumbnails
```

2. æ‹‰å– Docker é•œåƒï¼š
```bash
docker pull baozaolaowu/random-img-server:latest
```

3. è¿è¡Œå®¹å™¨ï¼š
```bash
docker run -d \
  -p 5000:5000 \
  -v "/path/to/config:/app/config" \
  -v "/path/to/photos:/app/photos" \
  -v "/path/to/thumbnails:/app/thumbnails" \
  --name random-img-server \
  baozaolaowu/random-img-server:latest
```

4. è®¿é—®æœåŠ¡ï¼š
- ç½‘é¡µç•Œé¢ï¼š`http://localhost:5000`
- ç›´æ¥å›¾ç‰‡é“¾æ¥ï¼š`http://localhost:5000/img/today.jpg`
- ç€‘å¸ƒæµæ¨¡å¼ï¼š`http://localhost:5000/waterfall`ï¼ˆæˆ–åœ¨ä¸»é¡µé¢å·¦ä¸‹è§’ç‚¹å‡»"åˆ‡æ¢ç€‘å¸ƒæµæ¨¡å¼"æŒ‰é’®ï¼‰

## é…ç½®è¯´æ˜

### ç›®å½•ç»“æ„
```
/path/to/config/         # é…ç½®æ–‡ä»¶ç›®å½•
  â””â”€â”€ config.json       # å®šæ—¶ä»»åŠ¡é…ç½®æ–‡ä»¶
/path/to/images/         # å›¾ç‰‡æ–‡ä»¶ç›®å½•
  â””â”€â”€ *.jpg,*.png,...  # å›¾ç‰‡æ–‡ä»¶
```

### å›¾ç‰‡è¦æ±‚
- æ”¯æŒçš„æ ¼å¼ï¼šPNGã€JPGã€JPEGã€GIFã€BMP
- æœ€å¤§æ–‡ä»¶å¤§å°ï¼š50MB

### Cron è¡¨è¾¾å¼ç¤ºä¾‹
- `*/5 * * * *` â†’ æ¯5åˆ†é’Ÿ
- `*/30 * * * *` â†’ æ¯30åˆ†é’Ÿ
- `0 * * * *` â†’ æ¯å°æ—¶æ•´ç‚¹
- `0 */2 * * *` â†’ æ¯2å°æ—¶
- `0 9 * * 1-5` â†’ å·¥ä½œæ—¥ä¸Šåˆ9ç‚¹

## ä½¿ç”¨æ–¹æ³•

### 1. ç½‘é¡µè®¿é—®
è®¿é—® `http://localhost:5000` å¯ä»¥ä½¿ç”¨å®Œæ•´çš„ç½‘é¡µç•Œé¢ï¼ŒåŒ…å«è®¾ç½®å’Œæ‰‹åŠ¨åˆ·æ–°åŠŸèƒ½ã€‚

### 2. ç›´æ¥å›¾ç‰‡é“¾æ¥

#### åŸºç¡€ç”¨æ³•ï¼ˆæ¨èï¼‰
```
http://localhost:5000/img/today.jpg
```
è¿™ä¸ªåœ°å€æ¯æ¬¡è®¿é—®éƒ½ä¼šè¿”å›ä¸€å¼ æ–°çš„éšæœºå›¾ç‰‡ï¼Œé€‚åˆåœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ä½¿ç”¨ã€‚

#### åœ¨ä¸åŒåœºæ™¯ä¸­ä½¿ç”¨

1. åœ¨å£çº¸è½¯ä»¶ä¸­ï¼š
```
# ç›´æ¥å¡«å†™è¿™ä¸ªåœ°å€å³å¯
http://localhost:5000/img/today.jpg
```

2. åœ¨ NAS é¢æ¿ä¸­ï¼š
```
http://localhost:5000/img/today.jpg
```

3. åœ¨ç½‘é¡µä¸­ä½¿ç”¨ï¼š
```html
<!-- åŸºç¡€ç”¨æ³• -->
<img src="http://localhost:5000/img/today.jpg">

<!-- å¦‚æœé‡åˆ°ç¼“å­˜é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨JavaScriptåŠ¨æ€æ›´æ–° -->
<script>
    const img = document.querySelector('img');
    function updateImage() {
        img.src = `http://localhost:5000/img/today.jpg?t=${Date.now()}`;
    }
    // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡
    setInterval(updateImage, 60000);
</script>
```

#### é«˜çº§ç”¨æ³•
å¦‚æœé‡åˆ°æµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼Œå¯ä»¥åœ¨é“¾æ¥åæ·»åŠ æ—¶é—´æˆ³å‚æ•°ï¼š
```
http://localhost:5000/img/today.jpg?t=123
```
æ³¨æ„ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ä¸éœ€è¦æ·»åŠ æ—¶é—´æˆ³ï¼ŒåŸºç¡€é“¾æ¥å°±èƒ½æ»¡è¶³éœ€æ±‚ã€‚

## èµèµæ”¯æŒ Donate

å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿èµèµæ”¯æŒ ğŸ‘

<div align="center">
  <img src="assets/image/donate/wx.jpg" alt="å¾®ä¿¡æ”¶æ¬¾ç " width="200" style="margin-right: 20px">
  <img src="assets/image/donate/zfb.jpg" alt="æ”¯ä»˜å®æ”¶æ¬¾ç " width="200">
</div>


---

# Random Image & Daily Picture

A Flask-based web service that provides random images and daily pictures from your local folder (e.g., NAS) with automatic refresh functionality.

## Demoï¼š

https://today-img.20160825.xyz

https://today-img.20160825.xyz/img/today.jpg


## Features

- ğŸ–¼ï¸ Two ways to access images:
  - Web interface (`http://localhost:5000`): Full control panel with display settings
  - Direct image URL (`http://localhost:5000/img/today.jpg`): Fixed URL that updates automatically

- ğŸ”„ Flexible refresh options:
  - Customizable intervals using cron expressions
  - Manual refresh button
  - Auto-refresh when tab becomes active

- ğŸ“± Smart display modes:
  - Smart mode (automatically adapts to image orientation)
  - Width fill mode
  - Height fill mode
  - Stretch fill mode

- ğŸš€ Performance optimized:
  - Image caching
  - Bandwidth-aware updates
  - Resource-saving when tab is inactive

- ğŸï¸ ç€‘å¸ƒæµæ¨¡å¼ï¼š
  - æµè§ˆå¤šå¼ å›¾ç‰‡çš„æœ€ä½³æ–¹å¼
  - å¤šåˆ—è‡ªé€‚åº”å¸ƒå±€ï¼Œå¯è‡ªå®šä¹‰åˆ—æ•°ï¼ˆ1-10åˆ—ï¼‰
  - æ–‡ä»¶å¤¹å¯¼èˆªä¸å±‚çº§æµè§ˆ
  - å›¾ç‰‡æ’åºåŠŸèƒ½ï¼ˆæŒ‰æ–‡ä»¶åã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€éšæœºé¡ºåºï¼‰
  - å›¾ç‰‡å…¨å±æŸ¥çœ‹ä¸ç¼©æ”¾
  - é”®ç›˜å¯¼èˆªï¼ˆæ–¹å‘é”®åˆ‡æ¢å›¾ç‰‡ï¼Œæ»šè½®ç¼©æ”¾ï¼ŒCtrl+æ»šè½®åˆ‡æ¢å›¾ç‰‡ï¼‰
  - è‡ªå®šä¹‰å¸ƒå±€è®¾ç½®ï¼ˆåˆ—é—´è·ã€å›¾ç‰‡é—´è·ã€åœ†è§’å¤§å°ï¼‰

## Use Cases

- Digital Photo Frame: Display your photo collection with automatic rotation
- Dynamic Wallpaper: Use with wallpaper apps that support URL-based images
- Homepage Background: Perfect for homepage or dashboard background
- Sub-panel Background: Integrate with tools like Homepage or Sub-panel for dynamic backgrounds

## Quick Start

1. Create configuration directory:
```bash
# Create config and images directories
mkdir -p /path/to/config /path/to/photos /path/to/thumbnails
```

2. Pull the Docker image:
```bash
docker pull baozaolaowu/random-img-server:latest
```

3. Run the container:
```bash
docker run -d \
  -p 5000:5000 \
  -v "/path/to/config:/app/config" \
  -v "/path/to/photos:/app/photos" \
  -v "/path/to/thumbnails:/app/thumbnails" \
  --name random-img-server \
  baozaolaowu/random-img-server:latest
```

4. Access the service:
- Web interface: `http://localhost:5000`
- Direct image URL: `http://localhost:5000/img/today.jpg`
- ç€‘å¸ƒæµæ¨¡å¼ï¼š`http://localhost:5000/waterfall`ï¼ˆæˆ–åœ¨ä¸»é¡µé¢å·¦ä¸‹è§’ç‚¹å‡»"åˆ‡æ¢ç€‘å¸ƒæµæ¨¡å¼"æŒ‰é’®ï¼‰

## Configuration

### Directory Structure
```
/path/to/config/         # Configuration directory
  â””â”€â”€ config.json       # Cron job configuration file
/path/to/images/         # Images directory
  â””â”€â”€ *.jpg,*.png,...  # Image files
```

### Image Requirements
- Supported formats: PNG, JPG, JPEG, GIF, BMP
- Maximum file size: 50MB

### Cron Expression Examples
- `*/5 * * * *` â†’ Every 5 minutes
- `*/30 * * * *` â†’ Every 30 minutes
- `0 * * * *` â†’ Every hour
- `0 */2 * * *` â†’ Every 2 hours
- `0 9 * * 1-5` â†’ Weekdays at 9:00 AM

## Usage

### 1. Web Interface
Visit `http://localhost:5000` to access the full web interface with settings and manual refresh options.

### 2. Direct Image URL

#### Basic Usage (Recommended)
```
http://localhost:5000/img/today.jpg
```
This URL returns a new random image on each request, suitable for most use cases.

#### Use Cases

1. In Wallpaper Software:
```
# Simply use this URL
http://localhost:5000/img/today.jpg
```

2. In NAS Panel:
```
http://localhost:5000/img/today.jpg
```

3. In Web Pages:
```html
<!-- Basic usage -->
<img src="http://localhost:5000/img/today.jpg">

<!-- If caching issues occur, use JavaScript to update -->
<script>
    const img = document.querySelector('img');
    function updateImage() {
        img.src = `http://localhost:5000/img/today.jpg?t=${Date.now()}`;
    }
    // Update every minute
    setInterval(updateImage, 60000);
</script>
```

#### Advanced Usage
If you encounter browser caching issues, you can add a timestamp parameter:
```
http://localhost:5000/img/today.jpg?t=123
```
Note: In most cases, the basic URL is sufficient and no timestamp is needed.
